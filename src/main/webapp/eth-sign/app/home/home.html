<!-- moved to controller
<script>
    $('.menu .item').tab();
</script>
-->

<style>
    .segment {
        font-size: 100% !important;
    }
</style>

<div class="ui container">

    <center>
        <h1 class="ui header" style="margin-top: 0.3em; margin-bottom: 0em">
            eth-sign
        </h1>
        <div style="font-weight: bold; font-size: 110%;">
            [ by
            <a href="https://cryptonomica.net" title="back to cryptonomica home page"
               target="_blank">cryptonomica.net</a>
            ]
        </div>
        <!--<div class="ui header" style="margin-top: 0.1em;color: #666666">-->
        <div class="ui header" style="color: #666666;margin-top: 0.3em">
            Sign a text using your Ethereum address key and verify signatures
        </div>
    </center>

    <div class="ui top attached tabular menu" style="font-size: 100%;">

        <a class="item active" data-tab="signTab">
            <!--<i class="edit icon"></i>&nbsp;-->
            Sign Text
        </a>
        <a class="item" data-tab="verifyTab">
            <!--<i class="search icon"></i>&nbsp;-->
            Verify Signature
        </a>
        <a class="item" data-tab="helpTab">
            <!--<i class="question icon"></i>&nbsp;-->
            FAQ
        </a>

    </div>

    <div id="signTab" class="ui bottom attached tab segment active" data-tab="signTab">

        <div ng-include="'app/home/sign.html'"></div>

    </div>

    <div id="verifyTab" class="ui bottom attached tab segment" data-tab="verifyTab">

        <!--<div ng-include="'app/home/verify.html'"></div>-->
        <!-- (!!!) does not work with ng-include -->

        <no-connection-to-node-error></no-connection-to-node-error>
        <alerts></alerts>

        <br>
        <form id="verificationForm" class="ui form">

            <div class="field">

                <h3><i class="file alternate outline icon"></i>&nbsp;Signed text:</h3>

                <!--<div class="two fields">-->
                <div class="field" style="margin-bottom: 0.2em">
                    <!--// onReadFile directive (see app/directives/directives.js)-->
                    <!--// readFileContent = $scope.readFileContent-->
                    <input type="file" class="mini ui button"
                           on-read-file="readFileForVerificationContent($fileContent)"/>
                </div>
                <!--<div class="field"></div>-->
                <!--</div>-->
                <div style="margin-bottom: 0.3em; margin-top: 0.1em;font-weight: bold">
                    paste text here or import from file:
                </div>
                <textarea rows="5" ng-model="signedMessageForVerification"></textarea>
            </div>

            <div class="field">

                <label>Signature</label>
                <div class="ui left icon input">
                    <i class="edit icon"></i>
                    <input type="text" ng-model="signatureForVerification">
                </div>
                <div style="margin-top: 0.5em">
                    <button class="ui secondary button" type="submit" ng-click="verifySignature()">
                        <!--<button class="ui button" type="submit" ng-click="verifySignature()">-->
                        Verify Signature
                    </button>
                </div>
                <br><br>

                <div class="field">
                    <label>Signed by:</label>
                    <div class="ui right action left icon input">
                        <i class="key icon"></i>
                        <input id="signatoryAddress" type="text" ng-model="signatoryAddress" disabled>
                        <button class="ui button" ng-click="copySignatoryAddressToClipboard()"
                                ng-disabled="!signatoryAddress">
                            Copy to clipboard
                        </button>
                    </div>
                </div>

                <div ng-show="signatory">

                    <div ng-show="signatory.verificationAddedOn>0">

                        <div style="font-weight: bold">Signatory:</div>

                        {{signatory.firstName}}&nbsp;{{signatory.lastName}}<br>
                        birthdate:&nbsp;{{signatory.birthDate | date:'yyyy-MM-dd'}}&nbsp;, nationality:&nbsp;
                        <a href="" ng-href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#{{signatory.nationality}}"
                           target="_blank">
                            {{signatory.nationality}}
                        </a><br>

                        OpenPGP public key:&nbsp;
                        <!--<a href="" ng-href="https://cryptonomica.net/#!/key/{{signatory.fingerprint}}" target="_blank">-->
                        <a href="" ng-href="https://cryptonomica.net/#!/key/{{signatory.fingerprint}}"
                           target="_blank">
                            {{signatory.fingerprint}}
                            <!--{{signatory.fingerprint}}-->
                        </a><br>

                        Key certificate valid until:&nbsp;
                        <span ng-style="signatory.openPGPkeyCertificateExpired && {'color':'red'}">
                        {{signatory.keyCertificateValidUntilDate | date:'yyyy-MM-dd'}}
                    </span><br>

                        <span ng-show="signatory.revokedOn>0" style="color: red;">
                            Key certificate revoked on:&nbsp;{{signatory.revokedOnDate | date:'yyyy-MM-dd'}}
                    </span>
                        <br>
                        <div>
                            Information provided by
                            <a href="" ng-href="{{currentNetwork.etherscanLinkPrefix}}address/{{contract._address}}"
                               target="_blank" title="Click to see on etherscan">
                                Cryptonomica Verification smart contract
                            </a><br>
                            You also can verify your identity and register a key via
                            <a href="https://www.cryptonomica.net" target="_blank">
                                Cryptonomica.net
                            </a>
                        </div>

                    </div>

                </div>

                <div ng-show="signatoryAddressUnknown">
                    <br>
                    Address
                    <a ng-href="{{currentNetwork.etherscanLinkPrefix}}address/{{signatoryAddress}}" target="_blank"
                       title="Click to see on etherscan">
                        {{signatoryAddress}}
                    </a>
                    is unknown or unverified <br>
                    (or the signature and the text do not match, or they are not real)<br>
                    If this is a real address, you can offer its owner to register it address via
                    <!--<a href="https://www.cryptonomica.net/#!/verifyEthAddress/">cryptonomica.net</a>-->
                    <a href="https://cryptonomica.net/#!/verifyEthAddress/" target="_blank">cryptonomica </a>
                    smart contract.
                </div>
            </div>

        </form>

    </div>

    <div id="helpTab" class="ui bottom attached tab segment" data-tab="helpTab">

        <div ng-include="'app/home/faq.html'"></div>


    </div>

    <!-- ------------------ -->

    <div id="info" class="ui segment">
         <span ng-show="web3.eth.defaultAccount">
                User ETH account detected:&nbsp;&nbsp;
                <a ng-href="{{currentNetwork.etherscanLinkPrefix}}address/{{web3.eth.defaultAccount}}" target="_blank">
                    {{web3.eth.defaultAccount}}
                </a>
         </span>
        <br>
        Network ID:&nbsp{{currentNetwork.network_id}}&nbsp(
        <a ng-href="{{currentNetwork.etherscanLinkPrefix}}" target="_blank">{{currentNetwork.networkName}}</a>)
        <br>
        <!--Web3.js ver.: {{web3.version}}-->

        <!--<i class="grey cog loading icon"></i>on <a href="https://cryptonomica.net">cryptonomica.net</a><br>-->
    </div>

</div>